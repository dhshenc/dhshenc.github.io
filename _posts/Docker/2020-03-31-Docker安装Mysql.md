---
layout: post
title: "Dockerå®‰è£…Mysql"
date: 2020-03-31
tag: Docker
---
### ä¸€ã€å‰è¨€

> * å®‰è£…Dockeråï¼Œåˆå®‰è£…MySQLã€‚è¿™å‡ å¤©å¯èƒ½ç¡®å®æœ‰ç‚¹æ—¶é—´ğŸ¤£
> * å®‰è£…äº†ä¸€ä¸ªMySQL8çš„ç‰ˆæœ¬ï¼Œé‡åˆ°äº†ä¸€ç‚¹å°é—®é¢˜ï¼Œä¸‹é¢è¯¦ç»†è¯´æ˜

### äºŒã€æ‹‰å–é•œåƒ

> * **ç›´æ¥æ‹‰å–å®˜æ–¹é•œåƒ**
>   - å¯ä»¥å…ˆæœç´¢ä¸€ä¸‹dockeré•œåƒ
>```shell
> docker search mysql #(é•œåƒå)
>```
>   - æ‹‰å–MySQLé•œåƒï¼ˆæ²¡æœ‰æŒ‡å®šç‰ˆæœ¬é»˜è®¤æ‹‰å–æœ€æ–°ç‰ˆï¼‰
>```shell
> docker pull mysql 
>```
> * **ä»æŒ‡å®šç½‘ç«™æ‹‰å–æŒ‡å®šçš„ç‰ˆæœ¬**
>   - åªè¦ä½ ä¼šæ‹‰å–MySQLçš„é•œåƒï¼Œå…¶ä»–é•œåƒåº”è¯¥ä¹Ÿä¼šäº†ã€‚
>   - é€šè¿‡å›½å†…[é•œåƒç½‘ç«™](https://www.daocloud.io/)ï¼ˆä¹‹å‰çš„æ–‡ç« ä¹Ÿè¯´è¿‡ï¼‰æ‹‰å–é•œåƒã€‚
>   - ç™»å½•åï¼Œç‚¹å‡»ã€å‘ç°é•œåƒã€‘ã€‚æ‰¾è‡ªå·±éœ€è¦çš„é•œåƒï¼Œå¹¶é€‰æ‹©ç‰ˆæœ¬
> ![Docker](/images/Docker/001.jpg)
>```shell
> docker pull daocloud.io/library/mysql:5.7.4
>```
> 

### ä¸‰ã€å¯åŠ¨MySQLå®¹å™¨

> * **æ³¨æ„:**
>   - å¯åŠ¨MySQLå®¹å™¨æ—¶ï¼Œå¦‚æœé•œåƒæ²¡æœ‰ä¸‹è½½ï¼Œä¼šè‡ªåŠ¨ä¸‹è½½åï¼Œå†å¯åŠ¨ã€‚å¦‚æœå·²ç»ä¸‹è½½ï¼Œé‚£ä¹ˆä¼šç›´æ¥å¯åŠ¨ã€‚
>   - ä¸‹é¢çš„å‘½ä»¤å®‰è£…ä½ç‰ˆæœ¬çš„åº”è¯¥æ²¡é—®é¢˜(ä¹‹å‰ç”¨è¿‡æ²¡é—®é¢˜ï¼Œè¿™æ¬¡æ²¡æœ‰éªŒè¯ï¼Œæœ‰é—®é¢˜å†è¯´)ğŸ˜‚ã€‚
>   - å®‰è£…æœ€æ–°ç‰ˆçš„è¯ï¼Œä¸‹é¢æœ‰è§£å†³æ–¹æ¡ˆ
>```shell
> #æ¨èä½¿ç”¨docker-composeï¼Œå°±ä¸ç”¨æ¯æ¬¡æ•²è¿™ä¹ˆé•¿çš„å‘½ä»¤äº†ã€‚ä»¥åå¯èƒ½ä¼šæ›´æ–°docker-composeçš„ä½¿ç”¨æ•™ç¨‹
> docker run -p 3306:3306 --name mysql \
> -v /usr/local/docker/mysql/conf:/etc/mysql \
> -v /usr/local/docker/mysql/logs:/var/log/mysql \
> -v /usr/local/docker/mysql/data:/var/lib/mysql \
> -e MYSQL_ROOT_PASSWORD=123456 \
> -d mysql
>```
> * **å‘½åå‚æ•°:**
>   - -p 3306:3306 ï¼šå°†å®¹å™¨çš„3306ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„3306ç«¯å£
>   - -v /usr/local/docker/mysql/conf:/etc/mysql ï¼šå°†ä¸»æœºå½“å‰ç›®å½•ä¸‹çš„ conf æŒ‚è½½åˆ°å®¹å™¨çš„/etc/mysql 
>   - -v /usr/local/docker/mysql/logs:/var/log/mysql ï¼šå°†ä¸»æœºå½“å‰ç›®å½•ä¸‹çš„ logs ç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„ /var/log/mysql 
>   - -v /usr/local/docker/mysql/data:/var/lib/mysql ï¼šå°†ä¸»æœºå½“å‰ç›®å½•ä¸‹çš„ data ç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„ /var/lib/mysql 
>   - -e MYSQL\_ROOT\_PASSWORD=123456 ï¼šåˆå§‹åŒ–rootç”¨æˆ·çš„å¯†ç 
>
> * **dockerå®¹å™¨å¸¸ç”¨å‘½ä»¤**
>   - ä½¿ç”¨ä¸‹é¢å‘½ä»¤éªŒè¯æ˜¯å¦æœ‰é—®é¢˜ã€‚
>```shell
> #æŸ¥çœ‹dockerå®¹å™¨è¿è¡Œæ—¥å¿—
> docker logs (å®¹å™¨ID)
> #æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨
> docker ps
> #æŸ¥çœ‹æ‰€æœ‰çš„å®¹å™¨
> docker ps -a
> #æŸ¥çœ‹æœ€è¿‘çš„è¿è¡Œå®¹å™¨
> docker ps -l
> #åœæ­¢è¿è¡Œçš„å®¹å™¨
> docker stop (å®¹å™¨ID)  
> #åˆ é™¤å®¹å™¨ï¼ˆå¿…é¡»å…ˆåœæ­¢ï¼‰
> docker rm (å®¹å™¨ID)
> #è¿›å…¥dockerå®¹å™¨
> docker exec -it container-id /bin/bash
>```

### å››ã€é‡åˆ°çš„é—®é¢˜

> * è¿™é‡Œè®°å½•ä¸‹dockerå®‰è£…MySQL8çš„æ—¶å€™é‡åˆ°çš„é—®é¢˜
>   - é€šè¿‡æŸ¥çœ‹æ—¥å¿—ï¼ŒæŠ¥è¿™ä¸ªé”™è¯¯ï¼š`docker mysql mysqld: Error on realpath() on '/var/lib/mysql-files' No such file or directory`
> * è§£å†³ï¼š
>   - åœ¨ä¸Šé¢çš„å¯åŠ¨å®¹å™¨çš„å‘½ä»¤ä¸­æ·»åŠ ä¸‹é¢è¿™ä¸ª
>```shell
> #è¿™ä¸ªæŒ‚è½½æ–‡ä»¶ç»æŸ¥è¯¢ï¼Œæœªæ‰¾åˆ°ç›¸å…³æ–‡æ¡£
> -v /home/mysql/mysql-files:/var/lib/mysql-files
>```

<br>
    
è½¬è½½è¯·æ³¨æ˜ï¼š[Memoryçš„åšå®¢](https://www.shendonghai.com) Â» [ç‚¹å‡»é˜…è¯»åŸæ–‡](http://www.shendonghai.com/2020/03/Docker%E5%AE%89%E8%A3%85Mysql/) 